# datadog logstash metrics

This is a datadog agent with integrated logstash plugin.

## Configuration

The plugins configuration is generated by setting environment variables:

* `LOGSTASH_{i}_URL`: The URL where Logstash provides its monitoring API. required.
* `LOGSTASH_{i}_SSL_VERIFY`: Instruct the check to validate SSL certificates when connecting to `url`. optional, default: false.
* `LOGSTASH_{i}_SSL_CERT`: Path to the certificate file used to identify the connection to `url`. optional.
* `LOGSTASH_{i}_SSL_KEY`: Path to the private keyfile used to identify the connection to `url`. optional.
* `LOGSTASH_{i}_TAGS_{j}`: Tag to attach to every metric, event and service check emitted by this integration. optional.

## Example, single logstash

The following environment variables

```shell script
LOGSTASH_0_URL=http://localhost:9600
LOGSTASH_0_TAGS_0=stage:prod
LOGSTASH_0_TAGS_1=system:veryimportant
```

generates the following config

```yaml
init_config:
instances:
    - url: http://localhost:9600
      tags:
        - stage:prod
        - system:veryimportant
```

## Example, multiple logstash instances

The following environment variables

```shell script
LOGSTASH_0_URL=http://localhost:9600
LOGSTASH_1_URL=http://localhost:9700
```

generates the following config

```yaml
init_config:
instances:
    - url: http://localhost:9600
    - url: http://localhost:9700
```

